"use strict";var m=Object.defineProperty;var f=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var l=(r,t,e)=>t in r?m(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,c=(r,t)=>{for(var e in t||(t={}))_.call(t,e)&&l(r,e,t[e]);if(f)for(var e of f(t))b.call(t,e)&&l(r,e,t[e]);return r};Object.defineProperty(exports,"__esModule",{value:!0});exports[Symbol.toStringTag]="Module";var w=require("js-config-helper"),v=require("axios"),u=require("antd"),y=require("js-form-helper");function d(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}function N(r){if(r&&r.__esModule)return r;var t={__proto__:null,[Symbol.toStringTag]:"Module"};return r&&Object.keys(r).forEach(function(e){if(e!=="default"){var i=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,i.get?i:{enumerable:!0,get:function(){return r[e]}})}}),t.default=r,Object.freeze(t)}var x=d(w),h=N(v),g=d(y);class j{__(t,e=null,i=null){return this.get(t,e,i)}add(t,e=null){e||(e=this.locale),this.translations.set(e,Object.assign({},this.translations.get(e),t))}choice(t,e=1,i=null,n=null){n||(n=this.locale);let o=null;const s=this.fetch(`${n}.${t}`);if(!s)return typeof window!="undefined"&&this.options.storeNotFounds&&window[this.options.globalName]._notFounds.push(t),this.forceDisplayKeys?i?this.constructor.replaceString(t,i):t:"";const a=s.split("|");return a.some(p=>(o=this.constructor.matchChoiceCount(p,e),o)),o===!1&&(o=e>1?a[1]:a[0]),this._returnString(t,o,i)}constructor(t={},e="en",i={}){i=Object.assign({globalName:"translations",forceDisplayKeys:!0,storeNotFounds:!0},i),this.forceDisplayKeys=i.forceDisplayKeys,this.locale=e,this.translations=new Map,typeof window!="undefined"&&i.globalName&&(window[i.globalName]===void 0&&(window[i.globalName]={}),t=Object.assign({},window[i.globalName],t),i.storeNotFounds&&(window[i.globalName]._notFounds=[])),this.set(t,this.locale),this.options=i}static decodeHtml(t){const e=document.createElement("textarea");return e.innerHTML=t,e.value}fetch(t){const e=t.split("."),i=e.shift();let n=this.translations.get(i);return e.forEach(o=>{n&&(n=n[o])}),n}get(t,e=null,i=null){typeof e=="string"&&(i=e,e=null),i||(i=this.locale);const n=this.fetch(`${i}.${t}`);return this._returnString(t,n,e)}has(t,e=null){return e||(e=this.locale),this.fetch(`${e}.${t}`)!==void 0}static matchChoiceCount(t,e){const i=t.match(/^[{[]([^[\]{}]*)[}\]](.*)/);if(!i)return!1;if(i[1].includes(",")){const[n,o]=i[1].split(",",2);if(o==="*"&&e>=n||n==="*"&&e<=o||e>=n&&e<=o)return i[2]}return parseInt(i[1],10)===e?i[2]:null}static replaceString(t,e){return e?Object.entries(e).reduce((i,[n,o])=>{o=String(o);const s=n.toLowerCase();return i.replace(`:${s}`,o).replace(`:${s.toUpperCase()}`,o.toUpperCase()).replace(`:${s.charAt(0).toUpperCase()}${s.slice(1)}`,`${o.charAt(0).toUpperCase()}${o.slice(1)}`)},t):t}_returnString(t,e,i){return typeof e!="string"&&this.forceDisplayKeys&&(e=t,this.options.storeNotFounds&&typeof window!="undefined"&&window[this.options.globalName]._notFounds.push(t)),i&&(e=this.constructor.replaceString(e,i)),this.constructor.decodeHtml(e)}setLocale(t){this.locale=t}set(t,e=null){e||(e=this.locale),this.translations.set(e,t)}}function $(r={},t="en",e={}){return new j(r,t,e)}exports.api=void 0;exports.http=void 0;exports.config=void 0;exports.i18n=void 0;exports.store=void 0;exports.form=void 0;exports.formApi=void 0;exports.message=void 0;exports.notification=void 0;exports.exported=void 0;function C(r){var t,e,i;if(r){if(exports.config=new x.default(r),exports.http=exports.config.get("override.http")||h.create(),exports.api=exports.config.get("override")||h.create({baseURL:exports.config.get("api.url")}),exports.config.has("exclude.form")||(exports.form=function(n,o){return new g.default(n,c({http:exports.http},o))},exports.formApi=function(n,o){return new g.default(n,c({http:exports.api},o))}),exports.config.has("exclude.message")||(exports.message=exports.config.get("override.message")||u.message),exports.config.has("exclude.notification")||(exports.notification=exports.config.get("override.notification")||u.notification),!exports.config.has("exclude.i18n")){const n=r.translations[r.locale];exports.i18n=$(n,r.locale,{globalName:"translations",forceDisplayKeys:!0,storeNotFounds:!0})}exports.store=exports.config.get("override.store"),exports.exported={config:exports.config,api:exports.api,http:exports.http,i18n:exports.i18n,form:exports.form,formApi:exports.formApi,store:exports.store,t:(t=exports.i18n)==null?void 0:t.__.bind(exports.i18n),__:(e=exports.i18n)==null?void 0:e.__.bind(exports.i18n),choice:(i=exports.i18n)==null?void 0:i.choice.bind(exports.i18n),message:exports.message,notification:exports.notification},exports.config.has("debug")&&console.log("\u2934 useUp() accessible vars :",exports.exported)}return exports.exported}exports.useUp=C;
