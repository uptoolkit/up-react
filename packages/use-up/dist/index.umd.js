var p=Object.defineProperty;var _=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var b=(i,o,a)=>o in i?p(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a,h=(i,o)=>{for(var a in o||(o={}))C.call(o,a)&&b(i,a,o[a]);if(_)for(var a of _(o))F.call(o,a)&&b(i,a,o[a]);return i};(function(i,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("js-config-helper"),require("axios"),require("antd"),require("js-form-helper")):typeof define=="function"&&define.amd?define(["exports","js-config-helper","axios","antd","js-form-helper"],o):(i=typeof globalThis!="undefined"?globalThis:i||self,o(i.useUp={},i.Config,i.axios,i.antd,i.Form))})(this,function(i,o,a,d,w){"use strict";function u(f){return f&&typeof f=="object"&&"default"in f?f:{default:f}}var v=u(o),g=u(a),m=u(w);class y{__(t,e=null,n=null){return this.get(t,e,n)}add(t,e=null){e||(e=this.locale),this.translations.set(e,Object.assign({},this.translations.get(e),t))}choice(t,e=1,n=null,r=null){r||(r=this.locale);let s=null;const c=this.fetch(`${r}.${t}`);if(!c)return this.options.storeNotFounds&&window[this.options.globalName]._notFounds.push(t),this.forceDisplayKeys?n?this.constructor.replaceString(t,n):t:"";const l=c.split("|");return l.some(j=>(s=this.constructor.matchChoiceCount(j,e),s)),s===!1&&(s=e>1?l[1]:l[0]),this._returnString(t,s,n)}constructor(t={},e="en",n={}){n=Object.assign({globalName:"translations",forceDisplayKeys:!0,storeNotFounds:!0},n),this.forceDisplayKeys=n.forceDisplayKeys,this.locale=e,this.translations=new Map,n.globalName&&(window[n.globalName]===void 0&&(window[n.globalName]={}),t=Object.assign({},window[n.globalName],t),n.storeNotFounds&&(window[n.globalName]._notFounds=[])),this.set(t,this.locale),this.options=n}static decodeHtml(t){const e=document.createElement("textarea");return e.innerHTML=t,e.value}fetch(t){const e=t.split("."),n=e.shift();let r=this.translations.get(n);return e.forEach(s=>{r&&(r=r[s])}),r}get(t,e=null,n=null){typeof e=="string"&&(n=e,e=null),n||(n=this.locale);const r=this.fetch(`${n}.${t}`);return this._returnString(t,r,e)}has(t,e=null){return e||(e=this.locale),this.fetch(`${e}.${t}`)!==void 0}static matchChoiceCount(t,e){const n=t.match(/^[{[]([^[\]{}]*)[}\]](.*)/);if(!n)return!1;if(n[1].includes(",")){const[r,s]=n[1].split(",",2);if(s==="*"&&e>=r||r==="*"&&e<=s||e>=r&&e<=s)return n[2]}return parseInt(n[1],10)===e?n[2]:null}static replaceString(t,e){return e?Object.entries(e).reduce((n,[r,s])=>{s=String(s);const c=r.toLowerCase();return n.replace(`:${c}`,s).replace(`:${c.toUpperCase()}`,s.toUpperCase()).replace(`:${c.charAt(0).toUpperCase()}${c.slice(1)}`,`${s.charAt(0).toUpperCase()}${s.slice(1)}`)},t):t}_returnString(t,e,n){return typeof e!="string"&&this.forceDisplayKeys&&(e=t,this.options.storeNotFounds&&window[this.options.globalName]._notFounds.push(t)),n&&(e=this.constructor.replaceString(e,n)),this.constructor.decodeHtml(e)}setLocale(t){this.locale=t}set(t,e=null){e||(e=this.locale),this.translations.set(e,t)}}function N(f={},t="en",e={}){return new y(f,t,e)}i.api=void 0,i.http=void 0,i.config=void 0,i.i18n=void 0,i.store=void 0,i.form=void 0,i.formApi=void 0,i.message=void 0,i.notification=void 0,i.exported=void 0;function $(f){var t,e,n;if(f){if(i.config=new v.default(f),i.http=i.config.get("override.http")||g.default.create(),i.api=i.config.get("override")||g.default.create({baseURL:i.config.get("api.url")}),i.config.has("exclude.form")||(i.form=function(r,s){return new m.default(r,h({http:i.http},s))},i.formApi=function(r,s){return new m.default(r,h({http:i.api},s))}),i.config.has("exclude.message")||(i.message=i.config.get("override.message")||d.message),i.config.has("exclude.notification")||(i.notification=i.config.get("override.notification")||d.notification),!i.config.has("exclude.i18n")){const r=f.translations[f.locale];i.i18n=N(r,f.locale,{globalName:"translations",forceDisplayKeys:!0,storeNotFounds:!0})}i.store=i.config.get("override.store"),i.exported={config:i.config,api:i.api,http:i.http,i18n:i.i18n,form:i.form,formApi:i.formApi,store:i.store,t:(t=i.i18n)==null?void 0:t.__.bind(i.i18n),__:(e=i.i18n)==null?void 0:e.__.bind(i.i18n),choice:(n=i.i18n)==null?void 0:n.choice.bind(i.i18n),message:i.message,notification:i.notification},i.config.has("debug")&&console.log("\u2934 useUp() accessible vars :",i.exported)}return i.exported}i.useUp=$,Object.defineProperty(i,"__esModule",{value:!0}),i[Symbol.toStringTag]="Module"});
