(function(n,w){typeof exports=="object"&&typeof module<"u"?w(exports,require("react"),require("js-config-helper"),require("axios"),require("antd"),require("js-form-helper"),require("@apollo/client"),require("i18next"),require("react-i18next"),require("react/jsx-runtime")):typeof define=="function"&&define.amd?define(["exports","react","js-config-helper","axios","antd","js-form-helper","@apollo/client","i18next","react-i18next","react/jsx-runtime"],w):(n=typeof globalThis<"u"?globalThis:n||self,w(n["use-up"]={},n.React,n.Config,n.axios,n.antd,n.Form,n.apolloClient,n.i18next,n.reactI18next,n.jsxRuntime))})(this,function(n,w,K,$,I,S,A,Q,W,E){"use strict";const C=u=>u&&typeof u=="object"&&"default"in u?u:{default:u},F=C($),U=C(Q);var Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Z(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var B={exports:{}};(function(u,c){var p=typeof self<"u"?self:Y,y=function(){function s(){this.fetch=!1,this.DOMException=p.DOMException}return s.prototype=p,new s}();(function(s){(function(h){var d={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function ne(e){return e&&DataView.prototype.isPrototypeOf(e)}if(d.arrayBuffer)var oe=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],se=ArrayBuffer.isView||function(e){return e&&oe.indexOf(Object.prototype.toString.call(e))>-1};function g(e){if(typeof e!="string"&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function G(e){return typeof e!="string"&&(e=String(e)),e}function D(e){var t={next:function(){var r=e.shift();return{done:r===void 0,value:r}}};return d.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(t,r){this.append(r,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}o.prototype.append=function(e,t){e=g(e),t=G(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},o.prototype.delete=function(e){delete this.map[g(e)]},o.prototype.get=function(e){return e=g(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(g(e))},o.prototype.set=function(e,t){this.map[g(e)]=G(t)},o.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),D(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),D(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),D(e)},d.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);function R(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function V(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function ae(e){var t=new FileReader,r=V(t);return t.readAsArrayBuffer(e),r}function fe(e){var t=new FileReader,r=V(t);return t.readAsText(e),r}function ue(e){for(var t=new Uint8Array(e),r=new Array(t.length),l=0;l<t.length;l++)r[l]=String.fromCharCode(t[l]);return r.join("")}function X(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function J(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?typeof e=="string"?this._bodyText=e:d.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:d.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():d.arrayBuffer&&d.blob&&ne(e)?(this._bodyArrayBuffer=X(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||se(e))?this._bodyArrayBuffer=X(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||(typeof e=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var e=R(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?R(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ae)}),this.text=function(){var e=R(this);if(e)return e;if(this._bodyBlob)return fe(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ue(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(he)}),this.json=function(){return this.text().then(JSON.parse)},this}var le=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ce(e){var t=e.toUpperCase();return le.indexOf(t)>-1?t:e}function v(e,t){t=t||{};var r=t.body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!r&&e._bodyInit!=null&&(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new o(t.headers)),this.method=ce(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})};function he(e){var t=new FormData;return e.trim().split("&").forEach(function(r){if(r){var l=r.split("="),a=l.shift().replace(/\+/g," "),i=l.join("=").replace(/\+/g," ");t.append(decodeURIComponent(a),decodeURIComponent(i))}}),t}function de(e){var t=new o,r=e.replace(/\r?\n[\t ]+/g," ");return r.split(/\r?\n/).forEach(function(l){var a=l.split(":"),i=a.shift().trim();if(i){var x=a.join(":").trim();t.append(i,x)}}),t}J.call(v.prototype);function b(e,t){t||(t={}),this.type="default",this.status=t.status===void 0?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}J.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var pe=[301,302,303,307,308];b.redirect=function(e,t){if(pe.indexOf(t)===-1)throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},h.DOMException=s.DOMException;try{new h.DOMException}catch{h.DOMException=function(t,r){this.message=t,this.name=r;var l=Error(t);this.stack=l.stack},h.DOMException.prototype=Object.create(Error.prototype),h.DOMException.prototype.constructor=h.DOMException}function j(e,t){return new Promise(function(r,l){var a=new v(e,t);if(a.signal&&a.signal.aborted)return l(new h.DOMException("Aborted","AbortError"));var i=new XMLHttpRequest;function x(){i.abort()}i.onload=function(){var _={status:i.status,statusText:i.statusText,headers:de(i.getAllResponseHeaders()||"")};_.url="responseURL"in i?i.responseURL:_.headers.get("X-Request-URL");var q="response"in i?i.response:i.responseText;r(new b(q,_))},i.onerror=function(){l(new TypeError("Network request failed"))},i.ontimeout=function(){l(new TypeError("Network request failed"))},i.onabort=function(){l(new h.DOMException("Aborted","AbortError"))},i.open(a.method,a.url,!0),a.credentials==="include"?i.withCredentials=!0:a.credentials==="omit"&&(i.withCredentials=!1),"responseType"in i&&d.blob&&(i.responseType="blob"),a.headers.forEach(function(_,q){i.setRequestHeader(q,_)}),a.signal&&(a.signal.addEventListener("abort",x),i.onreadystatechange=function(){i.readyState===4&&a.signal.removeEventListener("abort",x)}),i.send(typeof a._bodyInit>"u"?null:a._bodyInit)})}return j.polyfill=!0,s.fetch||(s.fetch=j,s.Headers=o,s.Request=v,s.Response=b),h.Headers=o,h.Request=v,h.Response=b,h.fetch=j,Object.defineProperty(h,"__esModule",{value:!0}),h})({})})(y),y.fetch.ponyfill=!0,delete y.fetch.polyfill;var m=y;c=m.fetch,c.default=m.fetch,c.fetch=m.fetch,c.Headers=m.Headers,c.Request=m.Request,c.Response=m.Response,u.exports=c})(B,B.exports);const ee=Z(B.exports);let T,P,f,te,M,L,H,k,O;n.exported=void 0,n.UpInit=!1;const N=async function(c){return f=new K.Config(c),P=f.get("override.http")||F.default.create(),T=f.get("override")||F.default.create({baseURL:f.get("api.url")}),f.has("exclude.form")||(M=function(p,y){return new S.Form(p,{http:P,...y})},L=function(p,y){return new S.Form(p,{http:T,...y})}),f.has("exclude.message")||(H=f.get("override.message")||I.message),f.has("exclude.notification")||(k=f.get("override.notification")||I.notification),f.has("exclude.i18n")||c.i18n&&await U.default.use(W.initReactI18next).init(c.i18n),f.has("exclude.graphql")||(f.has("graphql.client")?O=f.get("graphql.client"):f.has("graphql.url")&&(O=new A.ApolloClient({link:new A.HttpLink({uri:c.graphql.url,fetch:ee}),cache:new A.InMemoryCache}))),n.exported={config:f,api:T,http:P,i18n:U.default,form:M,formApi:L,store:te,graphqlClient:O,t:U.default.t,message:H,notification:k},f.has("debug")&&console.log("\u2934 useUp() accessible vars :",n.exported),n.UpInit=!0,n.exported},re=function(){return n.UpInit||console.warn("Up is not initialized, you must run setUp() first or add an UpProvider !"),n.exported},z=w.createContext({});function ie({options:u,children:c}){const[p,y]=w.useState();return w.useEffect(()=>{async function m(){const s=await N(u);y(s)}m()},[]),p?E.jsx(z.Provider,{value:p,children:E.jsx(A.ApolloProvider,{client:p.graphqlClient,children:c})}):E.jsx(E.Fragment,{})}n.UpContext=z,n.UpProvider=ie,n.setUp=N,n.useUp=re,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
