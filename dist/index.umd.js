(function(c,m){typeof exports=="object"&&typeof module<"u"?m(exports,require("react/jsx-runtime"),require("react"),require("js-config-helper"),require("axios"),require("js-form-helper"),require("i18next"),require("react-i18next"),require("@apollo/client")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react","js-config-helper","axios","js-form-helper","i18next","react-i18next","@apollo/client"],m):(c=typeof globalThis<"u"?globalThis:c||self,m(c["use-up"]={},c.jsxRuntime,c.React,c.Config,c.axios,c.Form,c.i18next,c.reactI18next,c.apolloClient))})(this,function(c,m,j,_e,we,K,Oe,xe,T){"use strict";const Q=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},W=Q(we),L=Q(Oe);var U=function(e,t){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},U(e,t)};function Z(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");U(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var b=function(){return b=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},b.apply(this,arguments)};function Ee(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}var N="Invariant Violation",ee=Object.setPrototypeOf,Se=ee===void 0?function(e,t){return e.__proto__=t,e}:ee,O=function(e){Z(t,e);function t(n){n===void 0&&(n=N);var r=e.call(this,typeof n=="number"?N+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=N,Se(r,t.prototype),r}return t}(Error);function x(e,t){if(!e)throw new O(t)}var te=["debug","log","warn","error","silent"],qe=te.indexOf("log");function A(e){return function(){if(te.indexOf(e)>=qe){var t=console[e]||console.log;return t.apply(console,arguments)}}}(function(e){e.debug=A("debug"),e.log=A("log"),e.warn=A("warn"),e.error=A("error")})(x||(x={}));function v(e){try{return e()}catch{}}const ne=v(function(){return globalThis})||v(function(){return window})||v(function(){return self})||v(function(){return global})||v(function(){return v.constructor("return this")()});var re="__",oe=[re,re].join("DEV");function je(){try{return Boolean(__DEV__)}catch{return Object.defineProperty(ne,oe,{value:v(function(){return process.env.NODE_ENV})!=="production",enumerable:!1,configurable:!0,writable:!0}),ne[oe]}}const D=je();function g(e){try{return e()}catch{}}var V=g(function(){return globalThis})||g(function(){return window})||g(function(){return self})||g(function(){return global})||g(function(){return g.constructor("return this")()}),M=!1;function Te(){V&&!g(function(){return process.env.NODE_ENV})&&!g(function(){return process})&&(Object.defineProperty(V,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),M=!0)}Te();function ie(){M&&(delete V.process,M=!1)}function R(e,t){if(!Boolean(e))throw new Error(t)}const Ae=10,ue=2;function Ce(e){return C(e,[])}function C(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return Pe(e,t);default:return String(e)}}function Pe(e,t){if(e===null)return"null";if(t.includes(e))return"[Circular]";const n=[...t,e];if(ke(e)){const r=e.toJSON();if(r!==e)return typeof r=="string"?r:C(r,n)}else if(Array.isArray(e))return Le(e,n);return Ie(e,n)}function ke(e){return typeof e.toJSON=="function"}function Ie(e,t){const n=Object.entries(e);if(n.length===0)return"{}";if(t.length>ue)return"["+Ue(e)+"]";const r=n.map(([o,i])=>o+": "+C(i,t));return"{ "+r.join(", ")+" }"}function Le(e,t){if(e.length===0)return"[]";if(t.length>ue)return"[Array]";const n=Math.min(Ae,e.length),r=e.length-n,o=[];for(let i=0;i<n;++i)o.push(C(e[i],t));return r===1?o.push("... 1 more item"):r>1&&o.push(`... ${r} more items`),"["+o.join(", ")+"]"}function Ue(e){const t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){const n=e.constructor.name;if(typeof n=="string"&&n!=="")return n}return t}class Ne{constructor(t,n="GraphQL request",r={line:1,column:1}){typeof t=="string"||R(!1,`Body must be a string. Received: ${Ce(t)}.`),this.body=t,this.name=n,this.locationOffset=r,this.locationOffset.line>0||R(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||R(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function De(){return ie()}function Ve(){__DEV__?x(typeof D=="boolean",D):x(typeof D=="boolean",39)}De(),Ve();function Me(e){return e.definitions.filter(function(t){return t.kind==="OperationDefinition"&&!!t.name}).map(function(t){return t.name.value})[0]||null}function Re(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=$e(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $e(e,t){if(!!e){if(typeof e=="string")return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}}function fe(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n){return t&&ce(e.prototype,t),n&&ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var B=function(){return typeof Symbol=="function"},F=function(e){return B()&&Boolean(Symbol[e])},z=function(e){return F(e)?Symbol[e]:"@@"+e};B()&&!F("observable")&&(Symbol.observable=Symbol("observable"));var Be=z("iterator"),G=z("observable"),ae=z("species");function P(e,t){var n=e[t];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function E(e){var t=e.constructor;return t!==void 0&&(t=t[ae],t===null&&(t=void 0)),t!==void 0?t:p}function Fe(e){return e instanceof p}function _(e){_.log?_.log(e):setTimeout(function(){throw e})}function k(e){Promise.resolve().then(function(){try{e()}catch(t){_(t)}})}function se(e){var t=e._cleanup;if(t!==void 0&&(e._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{var n=P(t,"unsubscribe");n&&n.call(t)}}catch(r){_(r)}}function H(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function ze(e){var t=e._queue;if(!!t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(le(e,t[n].type,t[n].value),e._state!=="closed");++n);}}function le(e,t,n){e._state="running";var r=e._observer;try{var o=P(r,t);switch(t){case"next":o&&o.call(r,n);break;case"error":if(H(e),o)o.call(r,n);else throw n;break;case"complete":H(e),o&&o.call(r);break}}catch(i){_(i)}e._state==="closed"?se(e):e._state==="running"&&(e._state="ready")}function J(e,t,n){if(e._state!=="closed"){if(e._state==="buffering"){e._queue.push({type:t,value:n});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:t,value:n}],k(function(){return ze(e)});return}le(e,t,n)}}var Ge=function(){function e(n,r){this._cleanup=void 0,this._observer=n,this._queue=void 0,this._state="initializing";var o=new He(this);try{this._cleanup=r.call(void 0,o)}catch(i){o.error(i)}this._state==="initializing"&&(this._state="ready")}var t=e.prototype;return t.unsubscribe=function(){this._state!=="closed"&&(H(this),se(this))},$(e,[{key:"closed",get:function(){return this._state==="closed"}}]),e}(),He=function(){function e(n){this._subscription=n}var t=e.prototype;return t.next=function(r){J(this._subscription,"next",r)},t.error=function(r){J(this._subscription,"error",r)},t.complete=function(){J(this._subscription,"complete")},$(e,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),e}(),p=function(){function e(n){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if(typeof n!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=n}var t=e.prototype;return t.subscribe=function(r){return(typeof r!="object"||r===null)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new Ge(r,this._subscriber)},t.forEach=function(r){var o=this;return new Promise(function(i,u){if(typeof r!="function"){u(new TypeError(r+" is not a function"));return}function f(){a.unsubscribe(),i()}var a=o.subscribe({next:function(l){try{r(l,f)}catch(s){u(s),a.unsubscribe()}},error:u,complete:i})})},t.map=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=E(this);return new i(function(u){return o.subscribe({next:function(f){try{f=r(f)}catch(a){return u.error(a)}u.next(f)},error:function(f){u.error(f)},complete:function(){u.complete()}})})},t.filter=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=E(this);return new i(function(u){return o.subscribe({next:function(f){try{if(!r(f))return}catch(a){return u.error(a)}u.next(f)},error:function(f){u.error(f)},complete:function(){u.complete()}})})},t.reduce=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=E(this),u=arguments.length>1,f=!1,a=arguments[1],l=a;return new i(function(s){return o.subscribe({next:function(y){var h=!f;if(f=!0,!h||u)try{l=r(l,y)}catch(q){return s.error(q)}else l=y},error:function(y){s.error(y)},complete:function(){if(!f&&!u)return s.error(new TypeError("Cannot reduce an empty sequence"));s.next(l),s.complete()}})})},t.concat=function(){for(var r=this,o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];var f=E(this);return new f(function(a){var l,s=0;function y(h){l=h.subscribe({next:function(q){a.next(q)},error:function(q){a.error(q)},complete:function(){s===i.length?(l=void 0,a.complete()):y(f.from(i[s++]))}})}return y(r),function(){l&&(l.unsubscribe(),l=void 0)}})},t.flatMap=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=E(this);return new i(function(u){var f=[],a=o.subscribe({next:function(s){if(r)try{s=r(s)}catch(h){return u.error(h)}var y=i.from(s).subscribe({next:function(h){u.next(h)},error:function(h){u.error(h)},complete:function(){var h=f.indexOf(y);h>=0&&f.splice(h,1),l()}});f.push(y)},error:function(s){u.error(s)},complete:function(){l()}});function l(){a.closed&&f.length===0&&u.complete()}return function(){f.forEach(function(s){return s.unsubscribe()}),a.unsubscribe()}})},t[G]=function(){return this},e.from=function(r){var o=typeof this=="function"?this:e;if(r==null)throw new TypeError(r+" is not an object");var i=P(r,G);if(i){var u=i.call(r);if(Object(u)!==u)throw new TypeError(u+" is not an object");return Fe(u)&&u.constructor===o?u:new o(function(f){return u.subscribe(f)})}if(F("iterator")&&(i=P(r,Be),i))return new o(function(f){k(function(){if(!f.closed){for(var a=Re(i.call(r)),l;!(l=a()).done;){var s=l.value;if(f.next(s),f.closed)return}f.complete()}})});if(Array.isArray(r))return new o(function(f){k(function(){if(!f.closed){for(var a=0;a<r.length;++a)if(f.next(r[a]),f.closed)return;f.complete()}})});throw new TypeError(r+" is not observable")},e.of=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var u=typeof this=="function"?this:e;return new u(function(f){k(function(){if(!f.closed){for(var a=0;a<o.length;++a)if(f.next(o[a]),f.closed)return;f.complete()}})})},$(e,null,[{key:ae,get:function(){return this}}]),e}();B()&&Object.defineProperty(p,Symbol("extensions"),{value:{symbol:G,hostReportError:_},configurable:!0});function Je(e){var t,n=e.Symbol;if(typeof n=="function")if(n.observable)t=n.observable;else{typeof n.for=="function"?t=n.for("https://github.com/benlesh/symbol-observable"):t=n("https://github.com/benlesh/symbol-observable");try{n.observable=t}catch{}}else t="@@observable";return t}var w;typeof self<"u"?w=self:typeof window<"u"?w=window:typeof global<"u"?w=global:typeof module<"u"?w=module:w=Function("return this")(),Je(w);var pe=p.prototype,he="@@observable";pe[he]||(pe[he]=function(){return this});function Ye(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(t.indexOf(o)<0)throw __DEV__?new O("illegal argument: ".concat(o)):new O(27)}return e}function Xe(e,t){var n=b({},e),r=function(i){typeof i=="function"?n=b(b({},n),i(n)):n=b(b({},n),i)},o=function(){return b({},n)};return Object.defineProperty(t,"setContext",{enumerable:!1,value:r}),Object.defineProperty(t,"getContext",{enumerable:!1,value:o}),t}function Ke(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName=typeof t.query!="string"?Me(t.query)||void 0:""),t}function de(e,t){return t?t(e):p.of()}function S(e){return typeof e=="function"?new ye(e):e}function I(e){return e.request.length<=1}var Qe=function(e){Z(t,e);function t(n,r){var o=e.call(this,n)||this;return o.link=r,o}return t}(Error),ye=function(){function e(t){t&&(this.request=t)}return e.empty=function(){return new e(function(){return p.of()})},e.from=function(t){return t.length===0?e.empty():t.map(S).reduce(function(n,r){return n.concat(r)})},e.split=function(t,n,r){var o=S(n),i=S(r||new e(de));return I(o)&&I(i)?new e(function(u){return t(u)?o.request(u)||p.of():i.request(u)||p.of()}):new e(function(u,f){return t(u)?o.request(u,f)||p.of():i.request(u,f)||p.of()})},e.execute=function(t,n){return t.request(Xe(n.context,Ke(Ye(n))))||p.of()},e.concat=function(t,n){var r=S(t);if(I(r))return __DEV__&&x.warn(new Qe("You are calling concat on a terminating link, which will have no effect",r)),r;var o=S(n);return I(o)?new e(function(i){return r.request(i,function(u){return o.request(u)||p.of()})||p.of()}):new e(function(i,u){return r.request(i,function(f){return o.request(f,u)||p.of()})||p.of()})},e.prototype.split=function(t,n,r){return this.concat(e.split(t,n,r||new e(de)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(t,n){throw __DEV__?new O("request is not implemented"):new O(22)},e.prototype.onError=function(t,n){if(n&&n.error)return n.error(t),!1;throw t},e.prototype.setOnError=function(t){return this.onError=t,this},e}();function We(e){return new ye(function(t,n){var r=Ee(t,[]);return new p(function(o){var i,u=!1;return Promise.resolve(r).then(function(f){return e(f,t.getContext())}).then(t.setContext).then(function(){u||(i=n(t).subscribe({next:o.next.bind(o),error:o.error.bind(o),complete:o.complete.bind(o)}))}).catch(o.error.bind(o)),function(){u=!0,i&&i.unsubscribe()}})})}let Y,X,d,Ze,me,be;c.exported=void 0,c.UpInit=!1;const ge=async function(t){d=new _e.Config(t),X=d.get("override.http")||W.default.create(),Y=d.get("override")||W.default.create({baseURL:d.get("api.url")}),d.has("exclude.form")||(me=function(r,o){return new K.Form(r,{http:X,...o})},be=function(r,o){return new K.Form(r,{http:Y,...o})}),d.has("exclude.i18n")||t.i18n&&await L.default.use(xe.initReactI18next).init(t.i18n);let n;if(!d.has("exclude.graphql"))if(d.has("graphql.client"))n=d.get("graphql.client");else{const r=T.createHttpLink({uri:t.graphql.url}),o=We(async(i,{headers:u})=>{const f=localStorage.getItem("accessToken");return{headers:{...u,Authorization:f?`Bearer ${f}`:""}}});n=new T.ApolloClient({link:o.concat(r),cache:new T.InMemoryCache})}return c.exported={config:d,api:Y,http:X,i18n:L.default,form:me,formApi:be,store:Ze,graphqlClient:n,t:L.default.t},d.has("debug")&&console.log("\u2934 useUp() accessible vars :",c.exported),c.UpInit=!0,c.exported},et=function(){return c.UpInit||console.warn("Up is not initialized, you must run setUp() first or add an UpProvider !"),c.exported},ve=j.createContext({});function tt({options:e,children:t}){const[n,r]=j.useState(!0),[o,i]=j.useState(),u=async()=>{const f=await ge(e);i(f),r(!1)};return j.useEffect(()=>{u().then(()=>console.log("loaded"))},[]),o?m.jsx(ve.Provider,{value:o,children:m.jsx(T.ApolloProvider,{client:o.graphqlClient,children:t})}):m.jsx(m.Fragment,{})}c.UpContext=ve,c.UpProvider=tt,c.setUp=ge,c.useUp=et,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
