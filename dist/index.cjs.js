"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("react/jsx-runtime"),s=require("react"),C=require("js-config-helper"),w=require("axios"),f=require("js-form-helper"),y=require("i18next"),I=require("react-i18next"),p=require("@apollo/client"),h=t=>t&&typeof t=="object"&&"default"in t?t:{default:t},d=h(w),a=h(y);let u,c,e,_,x,g;exports.exported=void 0;exports.UpInit=!1;const U=async function(n){e=new C.Config(n),c=e.get("override.http")||d.default.create(),u=e.get("override")||d.default.create({baseURL:e.get("api.url")}),e.has("exclude.form")||(x=function(i,r){return new f.Form(i,{http:c,...r})},g=function(i,r){return new f.Form(i,{http:u,...r})}),e.has("exclude.i18n")||n.i18n&&await a.default.use(I.initReactI18next).init(n.i18n);let o;return e.has("exclude.graphql")||(e.has("graphql.client")?o=e.get("graphql.client"):o=new p.ApolloClient({uri:n.graphql.url,cache:new p.InMemoryCache})),exports.exported={config:e,api:u,http:c,i18n:a.default,form:x,formApi:g,store:_,graphqlClient:o,t:a.default.t},e.has("debug")&&console.log("\u2934 useUp() accessible vars :",exports.exported),exports.UpInit=!0,exports.exported},b=function(){return exports.UpInit||console.warn("Up is not initialized, you must run setUp() first or add an UpProvider !"),exports.exported},q=s.createContext({});function P({options:t,children:n}){const[o,i]=s.useState(!0),[r,m]=s.useState(),v=async()=>{const j=await U(t);m(j),i(!1)};return s.useEffect(()=>{v().then(()=>console.log("loaded"))},[]),r?l.jsx(q.Provider,{value:r,children:l.jsx(p.ApolloProvider,{client:r.graphqlClient,children:n})}):l.jsx(l.Fragment,{})}exports.UpContext=q;exports.UpProvider=P;exports.setUp=U;exports.useUp=b;
